\hypertarget{classGhoti_1_1Wave_1_1Client}{}\doxysection{Ghoti\+::Wave\+::Client Class Reference}
\label{classGhoti_1_1Wave_1_1Client}\index{Ghoti::Wave::Client@{Ghoti::Wave::Client}}


Represents a client and all of its HTTP connections.  




{\ttfamily \#include $<$client.\+hpp$>$}



Collaboration diagram for Ghoti\+::Wave\+::Client\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classGhoti_1_1Wave_1_1Client__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_ae51af7aa6b8f591496a8f6a4a87a14bf}\label{classGhoti_1_1Wave_1_1Client_ae51af7aa6b8f591496a8f6a4a87a14bf}} 
\mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_ae51af7aa6b8f591496a8f6a4a87a14bf}{Client}} ()
\begin{DoxyCompactList}\small\item\em The constructor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_a840e519ca781888cbd54181572ebe3a7}\label{classGhoti_1_1Wave_1_1Client_a840e519ca781888cbd54181572ebe3a7}} 
\mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_a840e519ca781888cbd54181572ebe3a7}{$\sim$\+Client}} ()
\begin{DoxyCompactList}\small\item\em The destructor. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_af985924f96d22cff0646a4f5e2d1aecb}{is\+Running}} () const
\begin{DoxyCompactList}\small\item\em Indicates whether or not the client and its thread pools are currently active. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classGhoti_1_1Wave_1_1Client}{Client}} \& \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_ae8d814233ca996438a0b65dc782dba10}{start}} ()
\begin{DoxyCompactList}\small\item\em Instructs the client to start its thread pool and begin processing the requests in its queue. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classGhoti_1_1Wave_1_1Client}{Client}} \& \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_aca2c8694a7f5f17eea9d137c7c3bd1f6}{stop}} ()
\begin{DoxyCompactList}\small\item\em Instructs the client to gracefully shut down its thread pool. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_aed15ae6bd46ea8a0ab89471eb42d60f5}{dispatch\+Loop}} (std\+::stop\+\_\+token stoken)
\begin{DoxyCompactList}\small\item\em The dispatch loop used by the thread pool to process sending requests and receiving responses. \end{DoxyCompactList}\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}} $>$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_a4c7f5a65c02c9b1ea261bc080e07bf6e}{send\+Request}} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}} $>$ message)
\begin{DoxyCompactList}\small\item\em Enqueues a message to be sent to a client. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_a6c6aee0d44e42f40cb94d3d1349b5797}\label{classGhoti_1_1Wave_1_1Client_a6c6aee0d44e42f40cb94d3d1349b5797}} 
Ghoti\+::\+Pool\+::\+Pool \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_a6c6aee0d44e42f40cb94d3d1349b5797}{workers}}
\begin{DoxyCompactList}\small\item\em The thread pool worker queue. \end{DoxyCompactList}\item 
std\+::map$<$ std\+::string, std\+::map$<$ size\+\_\+t, std\+::pair$<$ std\+::set$<$ std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1ClientSession}{Ghoti\+::\+Wave\+::\+Client\+Session}} $>$ $>$, std\+::queue$<$ std\+::pair$<$ std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}} $>$, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}} $>$ $>$ $>$ $>$ $>$ $>$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_a8233c6177f4670e36977b81b6ca983cc}{domains}}
\begin{DoxyCompactList}\small\item\em Stores all connections and their request queues. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_a7ed65120f7d84b7012749764492aabf6}\label{classGhoti_1_1Wave_1_1Client_a7ed65120f7d84b7012749764492aabf6}} 
std\+::jthread \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_a7ed65120f7d84b7012749764492aabf6}{dispatch\+Thread}}
\begin{DoxyCompactList}\small\item\em The thread that runs the read/write processing queues. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_a8aa339693e02bbe0bce461cffaadc291}\label{classGhoti_1_1Wave_1_1Client_a8aa339693e02bbe0bce461cffaadc291}} 
bool \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client_a8aa339693e02bbe0bce461cffaadc291}{running}}
\begin{DoxyCompactList}\small\item\em Whether or not the client is processing read/write actions from the sockets. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Represents a client and all of its HTTP connections. 

This class is currently only used for testing (so that the HTTP connection can be controlled explicitly), but that does not mean that it can\textquotesingle{}t be used for more.

The \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client}{Client}} object can establish connections to a server, receive message requests and forward them to the appropriate session, and report on the status of the connections.

This class exists primarily for testing the server, and as such offers fine-\/grained control of enabling and disabling features. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_aed15ae6bd46ea8a0ab89471eb42d60f5}\label{classGhoti_1_1Wave_1_1Client_aed15ae6bd46ea8a0ab89471eb42d60f5}} 
\index{Ghoti::Wave::Client@{Ghoti::Wave::Client}!dispatchLoop@{dispatchLoop}}
\index{dispatchLoop@{dispatchLoop}!Ghoti::Wave::Client@{Ghoti::Wave::Client}}
\doxysubsubsection{\texorpdfstring{dispatchLoop()}{dispatchLoop()}}
{\footnotesize\ttfamily void Client\+::dispatch\+Loop (\begin{DoxyParamCaption}\item[{std\+::stop\+\_\+token}]{stoken }\end{DoxyParamCaption})}



The dispatch loop used by the thread pool to process sending requests and receiving responses. 


\begin{DoxyParams}{Parameters}
{\em stoken} & The jthread stop token, used to alert the thread that it should gracefully shut down. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_af985924f96d22cff0646a4f5e2d1aecb}\label{classGhoti_1_1Wave_1_1Client_af985924f96d22cff0646a4f5e2d1aecb}} 
\index{Ghoti::Wave::Client@{Ghoti::Wave::Client}!isRunning@{isRunning}}
\index{isRunning@{isRunning}!Ghoti::Wave::Client@{Ghoti::Wave::Client}}
\doxysubsubsection{\texorpdfstring{isRunning()}{isRunning()}}
{\footnotesize\ttfamily bool Client\+::is\+Running (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Indicates whether or not the client and its thread pools are currently active. 

\begin{DoxyReturn}{Returns}
Whether or not the client and its thread pools are currently active. 
\end{DoxyReturn}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_a4c7f5a65c02c9b1ea261bc080e07bf6e}\label{classGhoti_1_1Wave_1_1Client_a4c7f5a65c02c9b1ea261bc080e07bf6e}} 
\index{Ghoti::Wave::Client@{Ghoti::Wave::Client}!sendRequest@{sendRequest}}
\index{sendRequest@{sendRequest}!Ghoti::Wave::Client@{Ghoti::Wave::Client}}
\doxysubsubsection{\texorpdfstring{sendRequest()}{sendRequest()}}
{\footnotesize\ttfamily shared\+\_\+ptr$<$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}} $>$ Client\+::send\+Request (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}} $>$}]{message }\end{DoxyParamCaption})}



Enqueues a message to be sent to a client. 

This returns a shared pointer to a \mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}} which will contain the response when the request is completed.


\begin{DoxyParams}{Parameters}
{\em message} & The request to be sent to a client. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A shared pointer to a \mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}} the will eventually contain the response when the request is completed. 
\end{DoxyReturn}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_ae8d814233ca996438a0b65dc782dba10}\label{classGhoti_1_1Wave_1_1Client_ae8d814233ca996438a0b65dc782dba10}} 
\index{Ghoti::Wave::Client@{Ghoti::Wave::Client}!start@{start}}
\index{start@{start}!Ghoti::Wave::Client@{Ghoti::Wave::Client}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client}{Client}}\& Ghoti\+::\+Wave\+::\+Client\+::start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Instructs the client to start its thread pool and begin processing the requests in its queue. 

\begin{DoxyReturn}{Returns}
The \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client}{Client}} object. 
\end{DoxyReturn}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_aca2c8694a7f5f17eea9d137c7c3bd1f6}\label{classGhoti_1_1Wave_1_1Client_aca2c8694a7f5f17eea9d137c7c3bd1f6}} 
\index{Ghoti::Wave::Client@{Ghoti::Wave::Client}!stop@{stop}}
\index{stop@{stop}!Ghoti::Wave::Client@{Ghoti::Wave::Client}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client}{Client}} \& Client\+::stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Instructs the client to gracefully shut down its thread pool. 

\begin{DoxyReturn}{Returns}
The \mbox{\hyperlink{classGhoti_1_1Wave_1_1Client}{Client}} object. 
\end{DoxyReturn}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1Client_a8233c6177f4670e36977b81b6ca983cc}\label{classGhoti_1_1Wave_1_1Client_a8233c6177f4670e36977b81b6ca983cc}} 
\index{Ghoti::Wave::Client@{Ghoti::Wave::Client}!domains@{domains}}
\index{domains@{domains}!Ghoti::Wave::Client@{Ghoti::Wave::Client}}
\doxysubsubsection{\texorpdfstring{domains}{domains}}
{\footnotesize\ttfamily std\+::map$<$std\+::string, std\+::map$<$size\+\_\+t, std\+::pair$<$std\+::set$<$std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classGhoti_1_1Wave_1_1ClientSession}{Ghoti\+::\+Wave\+::\+Client\+Session}}$>$ $>$, std\+::queue$<$std\+::pair$<$std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}}$>$, std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}}$>$ $>$ $>$ $>$ $>$ $>$ Ghoti\+::\+Wave\+::\+Client\+::domains\hspace{0.3cm}{\ttfamily [private]}}



Stores all connections and their request queues. 

domains\mbox{[}domain\mbox{]}\mbox{[}port\mbox{]} = \{set\{\mbox{\hyperlink{classGhoti_1_1Wave_1_1ClientSession}{Client\+Session}}\}, queue\{\{request, response\}\}\} 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/wave/\mbox{\hyperlink{client_8hpp}{client.\+hpp}}\item 
src/\mbox{\hyperlink{client_8cpp}{client.\+cpp}}\end{DoxyCompactItemize}
