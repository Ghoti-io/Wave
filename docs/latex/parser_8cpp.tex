\hypertarget{parser_8cpp}{}\doxysection{src/parser.cpp File Reference}
\label{parser_8cpp}\index{src/parser.cpp@{src/parser.cpp}}


Define the \mbox{\hyperlink{classGhoti_1_1Wave_1_1Parser}{Ghoti\+::\+Wave\+::\+Parser}} class.  


{\ttfamily \#include $<$arpa/inet.\+h$>$}\newline
{\ttfamily \#include $<$ghoti.\+io/pool.\+hpp$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include \char`\"{}parser.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}parsing.\+hpp\char`\"{}}\newline
{\ttfamily \#include $<$set$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
Include dependency graph for parser.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{parser_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries SET\+\_\+\+NEW\+\_\+\+HEADER}
\item 
\#define {\bfseries SET\+\_\+\+MINOR\+\_\+\+STATE}(next\+State)
\item 
\#define {\bfseries SET\+\_\+\+MAJOR\+\_\+\+STATE}(next\+Major\+State,  next\+Minor\+State)
\item 
\#define {\bfseries READ\+\_\+\+WHITESPACE\+\_\+\+OPTIONAL}(next\+State)
\item 
\#define {\bfseries READ\+\_\+\+WHITESPACE\+\_\+\+REQUIRED}(next\+State,  status\+Code,  error\+Message)
\item 
\#define {\bfseries READ\+\_\+\+CRLF\+\_\+\+OPTIONAL}(next\+State)
\item 
\#define {\bfseries READ\+\_\+\+CRLF\+\_\+\+REQUIRED}(next\+State,  status\+Code,  error\+Message)
\item 
\mbox{\Hypertarget{parser_8cpp_aa363cd5ff8824e4bc7c4951fc66c3483}\label{parser_8cpp_aa363cd5ff8824e4bc7c4951fc66c3483}} 
\#define {\bfseries REQUEST\+\_\+\+STATUS\+\_\+\+ERROR}~(this-\/$>$type == REQUEST ? \char`\"{}Error reading request line.\char`\"{} \+: \char`\"{}Error reading status line.\char`\"{})
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Define the \mbox{\hyperlink{classGhoti_1_1Wave_1_1Parser}{Ghoti\+::\+Wave\+::\+Parser}} class. 



\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{parser_8cpp_aea8706b2cabe5074f44cd6121ddb925d}\label{parser_8cpp_aea8706b2cabe5074f44cd6121ddb925d}} 
\index{parser.cpp@{parser.cpp}!READ\_CRLF\_OPTIONAL@{READ\_CRLF\_OPTIONAL}}
\index{READ\_CRLF\_OPTIONAL@{READ\_CRLF\_OPTIONAL}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{READ\_CRLF\_OPTIONAL}{READ\_CRLF\_OPTIONAL}}
{\footnotesize\ttfamily \#define READ\+\_\+\+CRLF\+\_\+\+OPTIONAL(\begin{DoxyParamCaption}\item[{}]{next\+State }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{  \textcolor{keywordflow}{while} (this-\/>cursor < input\_length) \{ \(\backslash\)}
\DoxyCodeLine{    if ((this-\/>input[this-\/>cursor] != \textcolor{charliteral}{'\(\backslash\)r'}) \&\& (this-\/>input[this-\/>cursor] != \textcolor{charliteral}{'\(\backslash\)n'})) \{ \(\backslash\)}
\DoxyCodeLine{      SET\_MINOR\_STATE(nextState); \(\backslash\)}
\DoxyCodeLine{      break; \(\backslash\)}
\DoxyCodeLine{    \} \(\backslash\)}
\DoxyCodeLine{    ++this-\/>cursor; \(\backslash\)}
\DoxyCodeLine{  \}}

\end{DoxyCode}
\mbox{\Hypertarget{parser_8cpp_a55f27977fcfd9064d7db1c8c332095c4}\label{parser_8cpp_a55f27977fcfd9064d7db1c8c332095c4}} 
\index{parser.cpp@{parser.cpp}!READ\_CRLF\_REQUIRED@{READ\_CRLF\_REQUIRED}}
\index{READ\_CRLF\_REQUIRED@{READ\_CRLF\_REQUIRED}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{READ\_CRLF\_REQUIRED}{READ\_CRLF\_REQUIRED}}
{\footnotesize\ttfamily \#define READ\+\_\+\+CRLF\+\_\+\+REQUIRED(\begin{DoxyParamCaption}\item[{}]{next\+State,  }\item[{}]{status\+Code,  }\item[{}]{error\+Message }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{  \textcolor{keywordtype}{size\_t} len = this-\/>cursor -\/ this-\/>minorStart; \(\backslash\)}
\DoxyCodeLine{  while ((this-\/>cursor < input\_length) \&\& (len < 2)) \{ \(\backslash\)}
\DoxyCodeLine{    if (((len == 0) \&\& !((this-\/>input[this-\/>cursor] == \textcolor{charliteral}{'\(\backslash\)r'}) || (this-\/>input[this-\/>cursor] == \textcolor{charliteral}{'\(\backslash\)n'}))) \(\backslash\)}
\DoxyCodeLine{      || ((len == 1) \&\& (this-\/>input[this-\/>cursor] != \textcolor{charliteral}{'\(\backslash\)n'}))) \{ \(\backslash\)}
\DoxyCodeLine{      this-\/>currentMessage-\/>setStatusCode(statusCode).setErrorMessage(errorMessage); \(\backslash\)}
\DoxyCodeLine{    \} \(\backslash\)}
\DoxyCodeLine{    if (!this-\/>currentMessage-\/>hasError() \&\& (this-\/>input[this-\/>cursor] == \textcolor{charliteral}{'\(\backslash\)n'})) \{ \(\backslash\)}
\DoxyCodeLine{      SET\_MINOR\_STATE(nextState); \(\backslash\)}
\DoxyCodeLine{      ++this-\/>cursor; \(\backslash\)}
\DoxyCodeLine{      break; \(\backslash\)}
\DoxyCodeLine{    \} \(\backslash\)}
\DoxyCodeLine{    ++this-\/>cursor; \(\backslash\)}
\DoxyCodeLine{    ++len; \(\backslash\)}
\DoxyCodeLine{  \}}

\end{DoxyCode}
\mbox{\Hypertarget{parser_8cpp_a9dbfba99c0ff0c1cb019679e83bcad58}\label{parser_8cpp_a9dbfba99c0ff0c1cb019679e83bcad58}} 
\index{parser.cpp@{parser.cpp}!READ\_WHITESPACE\_OPTIONAL@{READ\_WHITESPACE\_OPTIONAL}}
\index{READ\_WHITESPACE\_OPTIONAL@{READ\_WHITESPACE\_OPTIONAL}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{READ\_WHITESPACE\_OPTIONAL}{READ\_WHITESPACE\_OPTIONAL}}
{\footnotesize\ttfamily \#define READ\+\_\+\+WHITESPACE\+\_\+\+OPTIONAL(\begin{DoxyParamCaption}\item[{}]{next\+State }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{  \textcolor{keywordflow}{while} ((this-\/>cursor < input\_length) \&\& ( \(\backslash\)}
\DoxyCodeLine{      isspace(this-\/>input[this-\/>cursor]) \(\backslash\)}
\DoxyCodeLine{      \&\& (this-\/>input[this-\/>cursor] != \textcolor{charliteral}{'\(\backslash\)n'}) \(\backslash\)}
\DoxyCodeLine{      \&\& (this-\/>input[this-\/>cursor] != \textcolor{charliteral}{'\(\backslash\)r'}))) \{ \(\backslash\)}
\DoxyCodeLine{    ++this-\/>cursor; \(\backslash\)}
\DoxyCodeLine{  \} \(\backslash\)}
\DoxyCodeLine{  if ((this-\/>cursor < input\_length) \&\& ( \(\backslash\)}
\DoxyCodeLine{      !isspace(this-\/>input[this-\/>cursor]) \(\backslash\)}
\DoxyCodeLine{      || (this-\/>input[this-\/>cursor] == \textcolor{charliteral}{'\(\backslash\)n'}) \(\backslash\)}
\DoxyCodeLine{      || (this-\/>input[this-\/>cursor] == \textcolor{charliteral}{'\(\backslash\)r'}))) \{ \(\backslash\)}
\DoxyCodeLine{    SET\_MINOR\_STATE(nextState); \(\backslash\)}
\DoxyCodeLine{  \}}

\end{DoxyCode}
\mbox{\Hypertarget{parser_8cpp_a022fc0fb164fe36e88812f2d549dcd10}\label{parser_8cpp_a022fc0fb164fe36e88812f2d549dcd10}} 
\index{parser.cpp@{parser.cpp}!READ\_WHITESPACE\_REQUIRED@{READ\_WHITESPACE\_REQUIRED}}
\index{READ\_WHITESPACE\_REQUIRED@{READ\_WHITESPACE\_REQUIRED}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{READ\_WHITESPACE\_REQUIRED}{READ\_WHITESPACE\_REQUIRED}}
{\footnotesize\ttfamily \#define READ\+\_\+\+WHITESPACE\+\_\+\+REQUIRED(\begin{DoxyParamCaption}\item[{}]{next\+State,  }\item[{}]{status\+Code,  }\item[{}]{error\+Message }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{  \textcolor{keywordflow}{while} ((this-\/>cursor < input\_length) \&\& ( \(\backslash\)}
\DoxyCodeLine{      isspace(this-\/>input[this-\/>cursor]) \(\backslash\)}
\DoxyCodeLine{      \&\& (this-\/>input[this-\/>cursor] != \textcolor{charliteral}{'\(\backslash\)n'}) \(\backslash\)}
\DoxyCodeLine{      \&\& (this-\/>input[this-\/>cursor] != \textcolor{charliteral}{'\(\backslash\)r'}))) \{ \(\backslash\)}
\DoxyCodeLine{    ++this-\/>cursor; \(\backslash\)}
\DoxyCodeLine{  \} \(\backslash\)}
\DoxyCodeLine{  if (this-\/>cursor < input\_length) \{ \(\backslash\)}
\DoxyCodeLine{    if (this-\/>cursor > this-\/>minorStart) \{ \(\backslash\)}
\DoxyCodeLine{      SET\_MINOR\_STATE(nextState); \(\backslash\)}
\DoxyCodeLine{    \} \(\backslash\)}
\DoxyCodeLine{    else \{ \(\backslash\)}
\DoxyCodeLine{      this-\/>currentMessage-\/>setStatusCode(statusCode).setErrorMessage(errorMessage); \(\backslash\)}
\DoxyCodeLine{    \} \(\backslash\)}
\DoxyCodeLine{  \}}

\end{DoxyCode}
\mbox{\Hypertarget{parser_8cpp_aef4ca3980e4157dce87949dbfa3cfe20}\label{parser_8cpp_aef4ca3980e4157dce87949dbfa3cfe20}} 
\index{parser.cpp@{parser.cpp}!SET\_MAJOR\_STATE@{SET\_MAJOR\_STATE}}
\index{SET\_MAJOR\_STATE@{SET\_MAJOR\_STATE}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{SET\_MAJOR\_STATE}{SET\_MAJOR\_STATE}}
{\footnotesize\ttfamily \#define SET\+\_\+\+MAJOR\+\_\+\+STATE(\begin{DoxyParamCaption}\item[{}]{next\+Major\+State,  }\item[{}]{next\+Minor\+State }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{  this-\/>readStateMajor = nextMajorState; \(\backslash\)}
\DoxyCodeLine{  this-\/>majorStart = this-\/>cursor; \(\backslash\)}
\DoxyCodeLine{  SET\_MINOR\_STATE(nextMinorState);}

\end{DoxyCode}
\mbox{\Hypertarget{parser_8cpp_aabe10b53604d079176c7b8de86a1b3ae}\label{parser_8cpp_aabe10b53604d079176c7b8de86a1b3ae}} 
\index{parser.cpp@{parser.cpp}!SET\_MINOR\_STATE@{SET\_MINOR\_STATE}}
\index{SET\_MINOR\_STATE@{SET\_MINOR\_STATE}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{SET\_MINOR\_STATE}{SET\_MINOR\_STATE}}
{\footnotesize\ttfamily \#define SET\+\_\+\+MINOR\+\_\+\+STATE(\begin{DoxyParamCaption}\item[{}]{next\+State }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{  this-\/>readStateMinor = nextState; \(\backslash\)}
\DoxyCodeLine{  this-\/>minorStart = this-\/>cursor;}

\end{DoxyCode}
\mbox{\Hypertarget{parser_8cpp_a343bec5bf8e30214d3c802351c8b7fd5}\label{parser_8cpp_a343bec5bf8e30214d3c802351c8b7fd5}} 
\index{parser.cpp@{parser.cpp}!SET\_NEW\_HEADER@{SET\_NEW\_HEADER}}
\index{SET\_NEW\_HEADER@{SET\_NEW\_HEADER}!parser.cpp@{parser.cpp}}
\doxysubsubsection{\texorpdfstring{SET\_NEW\_HEADER}{SET\_NEW\_HEADER}}
{\footnotesize\ttfamily \#define SET\+\_\+\+NEW\+\_\+\+HEADER}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{  this-\/>readStateMajor = NEW\_HEADER; \(\backslash\)}
\DoxyCodeLine{  this-\/>readStateMinor = this-\/>type == REQUEST \(\backslash\)}
\DoxyCodeLine{    ? BEGINNING\_OF\_REQUEST\_LINE \(\backslash\)}
\DoxyCodeLine{    : BEGINNING\_OF\_STATUS\_LINE; \(\backslash\)}
\DoxyCodeLine{  this-\/>majorStart = this-\/>cursor; \(\backslash\)}
\DoxyCodeLine{  this-\/>minorStart = this-\/>cursor; \(\backslash\)}
\DoxyCodeLine{  this-\/>contentLength = 0;}

\end{DoxyCode}
