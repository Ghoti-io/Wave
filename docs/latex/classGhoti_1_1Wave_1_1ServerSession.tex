\hypertarget{classGhoti_1_1Wave_1_1ServerSession}{}\doxysection{Ghoti\+::Wave\+::Server\+Session Class Reference}
\label{classGhoti_1_1Wave_1_1ServerSession}\index{Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}}


Represents a persistent connection with a client.  




{\ttfamily \#include $<$server\+Session.\+hpp$>$}



Collaboration diagram for Ghoti\+::Wave\+::Server\+Session\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classGhoti_1_1Wave_1_1ServerSession__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a5d72d79b1b26b599ef4d83d5b0f6a480}{Server\+Session}} (int \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a33366e09e156bfc37cac04b20930a840}{h\+Client}}, \mbox{\hyperlink{classGhoti_1_1Wave_1_1Server}{Server}} $\ast$\mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a9cc2066b9ca108bb965c7fbb289bbdbc}{server}})
\begin{DoxyCompactList}\small\item\em The constructor. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_adb56f9aa86018c1f32ef9f0d8736934d}\label{classGhoti_1_1Wave_1_1ServerSession_adb56f9aa86018c1f32ef9f0d8736934d}} 
\mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_adb56f9aa86018c1f32ef9f0d8736934d}{$\sim$\+Server\+Session}} ()
\begin{DoxyCompactList}\small\item\em The destructor. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a11403e8e46bec4541e905806c115239a}{has\+Read\+Data\+Waiting}} ()
\begin{DoxyCompactList}\small\item\em Checks to see whether or not the session has data waiting to be read from the socket. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a2f48fad3416a92726a775a3b744efb29}{has\+Write\+Data\+Waiting}} ()
\begin{DoxyCompactList}\small\item\em Checks to see whether or not the session has data waiting to be written to the socket. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a1d61404c2f1362f56fc85a1f0c5da855}{is\+Finished}} ()
\begin{DoxyCompactList}\small\item\em Indicates whether or not the session has completed all communications and may be terminated. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a2a02acac9b064406f4e4c3fae5dc6364}{read}} ()
\begin{DoxyCompactList}\small\item\em Perform a read from the session. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a27a203574e73d16caf3827b5a395642a}{write}} ()
\begin{DoxyCompactList}\small\item\em Perform a write to the session. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a74bf6b5d802f8d233c5de4f334be07d3}\label{classGhoti_1_1Wave_1_1ServerSession_a74bf6b5d802f8d233c5de4f334be07d3}} 
std\+::unique\+\_\+ptr$<$ std\+::mutex $>$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a74bf6b5d802f8d233c5de4f334be07d3}{control\+Mutex}}
\begin{DoxyCompactList}\small\item\em Used to synchronize access to the session to make it thread safe. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a6829d562b3efefacd834e14661b186c4}\label{classGhoti_1_1Wave_1_1ServerSession_a6829d562b3efefacd834e14661b186c4}} 
std\+::unique\+\_\+ptr$<$ std\+::condition\+\_\+variable $>$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a6829d562b3efefacd834e14661b186c4}{control\+Condition\+Variable}}
\begin{DoxyCompactList}\small\item\em Used to synchronize access to the session to make it thread safe. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a33366e09e156bfc37cac04b20930a840}\label{classGhoti_1_1Wave_1_1ServerSession_a33366e09e156bfc37cac04b20930a840}} 
int \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a33366e09e156bfc37cac04b20930a840}{h\+Client}}
\begin{DoxyCompactList}\small\item\em The socket handle to the client. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a68b863379eb9887a64898e0352329627}\label{classGhoti_1_1Wave_1_1ServerSession_a68b863379eb9887a64898e0352329627}} 
size\+\_\+t \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a68b863379eb9887a64898e0352329627}{request\+Sequence}}
\begin{DoxyCompactList}\small\item\em A monotonically increasing counter to track request/response pairs. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a5f6e40e22415b892678a04b883333716}\label{classGhoti_1_1Wave_1_1ServerSession_a5f6e40e22415b892678a04b883333716}} 
size\+\_\+t \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a5f6e40e22415b892678a04b883333716}{write\+Offset}}
\begin{DoxyCompactList}\small\item\em A byte offset used to track how many bytes of a message have been written, so that individual write attempts do not duplicate data. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a5b1e7fbf108655adf5fa0b471c4511f2}\label{classGhoti_1_1Wave_1_1ServerSession_a5b1e7fbf108655adf5fa0b471c4511f2}} 
bool \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a5b1e7fbf108655adf5fa0b471c4511f2}{working}}
\begin{DoxyCompactList}\small\item\em Tracks whether or not the session has work queued. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a45b33a0948fb611b5e94f66b3750f278}\label{classGhoti_1_1Wave_1_1ServerSession_a45b33a0948fb611b5e94f66b3750f278}} 
bool \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a45b33a0948fb611b5e94f66b3750f278}{finished}}
\begin{DoxyCompactList}\small\item\em Tracks whether or not the session has completed all pending communications. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a8875a94bc7a04f7d5df723ae8a3244b0}\label{classGhoti_1_1Wave_1_1ServerSession_a8875a94bc7a04f7d5df723ae8a3244b0}} 
\mbox{\hyperlink{classGhoti_1_1Wave_1_1Parser}{Parser}} \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a8875a94bc7a04f7d5df723ae8a3244b0}{parser}}
\begin{DoxyCompactList}\small\item\em The parser object used to parse the raw HTTP stream. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a9cc2066b9ca108bb965c7fbb289bbdbc}\label{classGhoti_1_1Wave_1_1ServerSession_a9cc2066b9ca108bb965c7fbb289bbdbc}} 
\mbox{\hyperlink{classGhoti_1_1Wave_1_1Server}{Server}} $\ast$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_a9cc2066b9ca108bb965c7fbb289bbdbc}{server}}
\begin{DoxyCompactList}\small\item\em A pointer to the server object. \end{DoxyCompactList}\item 
std\+::map$<$ uint64\+\_\+t, std\+::pair$<$ std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}} $>$, std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}} $>$ $>$ $>$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_ab8fd6ac3eda1b45dd4cdb6f52774ab90}{messages}}
\begin{DoxyCompactList}\small\item\em Tracks request/response pairs. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_aee8993c5bfccf62e543d3b201caef6fe}\label{classGhoti_1_1Wave_1_1ServerSession_aee8993c5bfccf62e543d3b201caef6fe}} 
std\+::queue$<$ uint64\+\_\+t $>$ \mbox{\hyperlink{classGhoti_1_1Wave_1_1ServerSession_aee8993c5bfccf62e543d3b201caef6fe}{pipeline}}
\begin{DoxyCompactList}\small\item\em Simple queue to track which request sequence \# should be parsed next. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Represents a persistent connection with a client. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a5d72d79b1b26b599ef4d83d5b0f6a480}\label{classGhoti_1_1Wave_1_1ServerSession_a5d72d79b1b26b599ef4d83d5b0f6a480}} 
\index{Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}!ServerSession@{ServerSession}}
\index{ServerSession@{ServerSession}!Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}}
\doxysubsubsection{\texorpdfstring{ServerSession()}{ServerSession()}}
{\footnotesize\ttfamily Server\+Session\+::\+Server\+Session (\begin{DoxyParamCaption}\item[{int}]{h\+Client,  }\item[{\mbox{\hyperlink{classGhoti_1_1Wave_1_1Server}{Server}} $\ast$}]{server }\end{DoxyParamCaption})}



The constructor. 


\begin{DoxyParams}{Parameters}
{\em h\+Client} & The socket handle to the client connection. \\
\hline
{\em server} & A pointer to the parent \mbox{\hyperlink{classGhoti_1_1Wave_1_1Server}{Server}} object. \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a11403e8e46bec4541e905806c115239a}\label{classGhoti_1_1Wave_1_1ServerSession_a11403e8e46bec4541e905806c115239a}} 
\index{Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}!hasReadDataWaiting@{hasReadDataWaiting}}
\index{hasReadDataWaiting@{hasReadDataWaiting}!Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}}
\doxysubsubsection{\texorpdfstring{hasReadDataWaiting()}{hasReadDataWaiting()}}
{\footnotesize\ttfamily bool Server\+Session\+::has\+Read\+Data\+Waiting (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Checks to see whether or not the session has data waiting to be read from the socket. 

This is non-\/blocking mutex controlled. If the session is currently working, then this function will return false.

\begin{DoxyReturn}{Returns}
Whether or not the session has data waiting to be read from the socket. 
\end{DoxyReturn}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a2f48fad3416a92726a775a3b744efb29}\label{classGhoti_1_1Wave_1_1ServerSession_a2f48fad3416a92726a775a3b744efb29}} 
\index{Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}!hasWriteDataWaiting@{hasWriteDataWaiting}}
\index{hasWriteDataWaiting@{hasWriteDataWaiting}!Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}}
\doxysubsubsection{\texorpdfstring{hasWriteDataWaiting()}{hasWriteDataWaiting()}}
{\footnotesize\ttfamily bool Server\+Session\+::has\+Write\+Data\+Waiting (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Checks to see whether or not the session has data waiting to be written to the socket. 

This is non-\/blocking mutex controlled. If the session is currently working, then this function will return false.

\begin{DoxyReturn}{Returns}
Whether or not the session has data waiting to be written to the socket. 
\end{DoxyReturn}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a1d61404c2f1362f56fc85a1f0c5da855}\label{classGhoti_1_1Wave_1_1ServerSession_a1d61404c2f1362f56fc85a1f0c5da855}} 
\index{Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}!isFinished@{isFinished}}
\index{isFinished@{isFinished}!Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}}
\doxysubsubsection{\texorpdfstring{isFinished()}{isFinished()}}
{\footnotesize\ttfamily bool Server\+Session\+::is\+Finished (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Indicates whether or not the session has completed all communications and may be terminated. 

\begin{DoxyReturn}{Returns}
{\ttfamily true} if all communications have completed, {\ttfamily false} otherwise. 
\end{DoxyReturn}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a2a02acac9b064406f4e4c3fae5dc6364}\label{classGhoti_1_1Wave_1_1ServerSession_a2a02acac9b064406f4e4c3fae5dc6364}} 
\index{Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}!read@{read}}
\index{read@{read}!Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily void Server\+Session\+::read (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Perform a read from the session. 

This function is intended to be called by the server\textquotesingle{}s thread pool worker queue, probably in a lambda expression. \mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_a27a203574e73d16caf3827b5a395642a}\label{classGhoti_1_1Wave_1_1ServerSession_a27a203574e73d16caf3827b5a395642a}} 
\index{Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}!write@{write}}
\index{write@{write}!Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}}
\doxysubsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily void Server\+Session\+::write (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Perform a write to the session. 

This function is intended to be called by the server\textquotesingle{}s thread pool worker queue, probably in a lambda expression. 

\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classGhoti_1_1Wave_1_1ServerSession_ab8fd6ac3eda1b45dd4cdb6f52774ab90}\label{classGhoti_1_1Wave_1_1ServerSession_ab8fd6ac3eda1b45dd4cdb6f52774ab90}} 
\index{Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}!messages@{messages}}
\index{messages@{messages}!Ghoti::Wave::ServerSession@{Ghoti::Wave::ServerSession}}
\doxysubsubsection{\texorpdfstring{messages}{messages}}
{\footnotesize\ttfamily std\+::map$<$uint64\+\_\+t, std\+::pair$<$std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}}$>$, std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classGhoti_1_1Wave_1_1Message}{Message}}$>$ $>$ $>$ Ghoti\+::\+Wave\+::\+Server\+Session\+::messages\hspace{0.3cm}{\ttfamily [private]}}



Tracks request/response pairs. 

{\ttfamily messages\mbox{[}request sequence \#\mbox{]} = $<$request, response$>$} 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/wave/\mbox{\hyperlink{serverSession_8hpp}{server\+Session.\+hpp}}\item 
src/\mbox{\hyperlink{serverSession_8cpp}{server\+Session.\+cpp}}\end{DoxyCompactItemize}
